# -*- coding: utf-8 -*-
# frozen_string_literal: true

# PLEASE DO NOT EDIT THIS FILE, IT IS GENERATED AND WILL BE OVERWRITTEN:
# https://github.com/ccxt/ccxt/blob/master/CONTRIBUTING.md#how-to-contribute-code

require_relative 'btcbox'

module Ccxt
  class Jubi < Btcbox
    def describe
      return self.deep_extend(super, {
        'id' => 'jubi',
        'name' => 'jubi.com',
        'countries' => ['CN'],
        'rateLimit' => 1500,
        'version' => 'v1',
        'has' => {
          'CORS' => false,
          'fetchTickers' => true
        },
        'urls' => {
          'logo' => 'https://user-images.githubusercontent.com/1294454/27766581-9d397d9a-5edd-11e7-8fb9-5d8236c0e692.jpg',
          'api' => 'https://www.jubi.com/api',
          'www' => 'https://www.jubi.com',
          'doc' => 'https://www.jubi.com/help/api.html'
        }
      })
    end

    def fetch_markets(params = {})
      markets = self.publicGetAllticker
      keys = markets.keys
      result = []
      for p in (0...keys.length)
        id = keys[p]
        base = id.upcase
        quote = 'CNY' # todo
        symbol = base + '/' + quote
        base = self.common_currency_code(base)
        quote = self.common_currency_code(quote)
        result.push({
          'id' => id,
          'symbol' => symbol,
          'base' => base,
          'quote' => quote,
          'info' => id
        })
      end
      return result
    end
  end
end
